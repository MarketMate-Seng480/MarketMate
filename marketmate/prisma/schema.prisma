generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model User {
  id           String  @id
  email        String  @unique
  first_name   String
  last_name    String
  role         String  @default("user")
  profileImage String  @default("https://res.cloudinary.com/dx3x66v6d/image/upload/v1626740003/Profile%20Images/blank-profile-picture-973460_640")
  vendorId     String?
  cart         Cart?
  vendor       Vendor?
}

model Vendor {
  id             String         @id
  name           String
  description    String
  email          String
  phone          String
  logo           String
  userId         String         @unique
  products       Product[]
  user           User           @relation(fields: [userId], references: [id])
  upcomingEvents Event[]        @relation("EventToVendor")
  shopTags       ShopCategory[] @relation("ShopCategoryToVendor")
}

model Cart {
  id       String    @id
  userId   String    @unique
  total    Float
  user     User      @relation(fields: [userId], references: [id])
  products Product[] @relation("CartToProduct")
}

model Event {
  id          String   @id
  name        String
  description String
  startDate   DateTime
  endDate     DateTime
  location    String
  url         String
  images      String[]
  vendors     Vendor[] @relation("EventToVendor")
}

model Product {
  id           String            @id
  name         String
  description  String
  price        Float
  stock        Int
  vendorId     String
  detailImage  String[]
  featureImage String
  isFeatured   Boolean           @default(false)
  vendor       Vendor            @relation(fields: [vendorId], references: [id])
  carts        Cart[]            @relation("CartToProduct")
  categories   ProductCategory[] @relation("ProductToProductCategory")
}

model ProductCategory {
  id          String    @id
  name        String
  description String
  products    Product[] @relation("ProductToProductCategory")
}

model ShopCategory {
  id          String   @id
  name        String
  description String
  vendors     Vendor[] @relation("ShopCategoryToVendor")
}
